# Software Requirements Specification (SRS)
## Epic: Danh má»¥c dá»± Ã¡n - Quáº£n lÃ½ Danh má»¥c Dá»± Ã¡n

### User Story: DMDA-4.2
### Cháº¿ Ä‘á»™ Xem Kanban cho Danh má»¥c Dá»± Ã¡n

#### ThÃ´ng tin User Story
- **Story ID:** DMDA-4.2
- **Priority:** Medium
- **Story Points:** 12
- **Sprint:** Sprint 4
- **Status:** To Do
- **Phá»¥ thuá»™c:** DMDA-1.1, DMDA-3.1, DMDA-3.4, DMDA-4.1 (Cáº§n cÃ³ danh sÃ¡ch dá»± Ã¡n vÃ  cÃ¡c tráº¡ng thÃ¡i)

#### MÃ´ táº£ User Story
**Vá»›i vai trÃ² lÃ ** CÃ¡n bá»™ quáº£n lÃ½ dá»± Ã¡n,  
**TÃ´i muá»‘n** cÃ³ thá»ƒ xem danh má»¥c dá»± Ã¡n dÆ°á»›i dáº¡ng báº£ng Kanban (vá»›i cÃ¡c cá»™t Ä‘áº¡i diá»‡n cho tráº¡ng thÃ¡i cá»§a dá»± Ã¡n, vÃ­ dá»¥: "Khá»Ÿi táº¡o", "Chá» phÃª duyá»‡t", "ÄÃ£ phÃª duyá»‡t", "Tá»« chá»‘i phÃª duyá»‡t", "Dá»«ng thá»±c hiá»‡n", "YÃªu cáº§u chá»‰nh sá»­a"),  
**Äá»ƒ** tÃ´i cÃ³ thá»ƒ trá»±c quan hÃ³a quy trÃ¬nh lÃ m viá»‡c vÃ  nhanh chÃ³ng náº¯m báº¯t tráº¡ng thÃ¡i cá»§a táº¥t cáº£ cÃ¡c dá»± Ã¡n.

#### Äiá»u kiá»‡n cháº¥p nháº­n (Acceptance Criteria)
- [ ] CÃ³ tÃ¹y chá»n chuyá»ƒn Ä‘á»•i cháº¿ Ä‘á»™ xem giá»¯a dáº¡ng danh sÃ¡ch/báº£ng vÃ  Kanban
- [ ] CÃ¡c tháº» dá»± Ã¡n cÃ³ thá»ƒ kÃ©o tháº£ giá»¯a cÃ¡c cá»™t tráº¡ng thÃ¡i (náº¿u quyá»n cho phÃ©p)
- [ ] ThÃ´ng tin chÃ­nh cá»§a dá»± Ã¡n hiá»ƒn thá»‹ trÃªn má»—i tháº» Kanban
- [ ] CÃ¡c cá»™t Kanban Ä‘áº¡i diá»‡n cho cÃ¡c tráº¡ng thÃ¡i dá»± Ã¡n
- [ ] CÃ³ thá»ƒ filter vÃ  search trong cháº¿ Ä‘á»™ Kanban
- [ ] Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng dá»± Ã¡n trong má»—i cá»™t
- [ ] Responsive design cho mobile vÃ  tablet

#### 2.4 Activity Diagram
![DMDA-4.2 Activity Diagram](diagrams/DMDA-4.2%20Activity%20Diagram.png)

*Activity Diagram mÃ´ táº£ luá»“ng xá»­ lÃ½ cháº¿ Ä‘á»™ xem Kanban cho danh má»¥c dá»± Ã¡n*

---

### YÃªu cáº§u Chá»©c nÄƒng

#### TÃ­nh nÄƒng ChÃ­nh
1. **Giao diá»‡n Báº£ng Kanban**
   - Hiá»ƒn thá»‹ dá»± Ã¡n theo cá»™t tráº¡ng thÃ¡i
   - Chá»©c nÄƒng kÃ©o tháº£
   - Cáº­p nháº­t thá»i gian thá»±c
   - Thá»‘ng kÃª cá»™t

2. **Chuyá»ƒn Ä‘á»•i Cháº¿ Ä‘á»™ Xem**
   - Chuyá»ƒn Ä‘á»•i giá»¯a cháº¿ Ä‘á»™ xem danh sÃ¡ch vÃ  Kanban
   - Ghi nhá»› tÃ¹y chá»n ngÆ°á»i dÃ¹ng
   - Dá»¯ liá»‡u nháº¥t quÃ¡n giá»¯a cÃ¡c cháº¿ Ä‘á»™ xem
   - Hiá»‡u á»©ng chuyá»ƒn Ä‘á»•i mÆ°á»£t mÃ 

3. **Tháº» Kanban**
   - Hiá»ƒn thá»‹ thÃ´ng tin chÃ­nh cá»§a dá»± Ã¡n
   - Chá»‰ bÃ¡o trá»±c quan cho má»©c Ä‘á»™ Æ°u tiÃªn vÃ  tráº¡ng thÃ¡i
   - NÃºt hÃ nh Ä‘á»™ng nhanh
   - Hiá»‡u á»©ng hover vÃ  tooltip

#### Quy táº¯c Kinh doanh
- Chá»‰ ngÆ°á»i dÃ¹ng cÃ³ quyá»n má»›i cÃ³ thá»ƒ kÃ©o tháº£
- Thay Ä‘á»•i tráº¡ng thÃ¡i pháº£i Ä‘Æ°á»£c xÃ¡c thá»±c
- Äá»“ng bá»™ thá»i gian thá»±c vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u
- Tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t cho táº­p dá»¯ liá»‡u lá»›n

---

#### 5.5 Sequence Diagram
![DMDA-4.2 Sequence Diagram](diagrams/DMDA-4.2%20Sequence%20Diagram.png)

*Sequence Diagram mÃ´ táº£ tÆ°Æ¡ng tÃ¡c giá»¯a cÃ¡c thÃ nh pháº§n khi sá»­ dá»¥ng cháº¿ Ä‘á»™ xem Kanban*

---

### Äáº·c táº£ Ká»¹ thuáº­t

#### Cáº­p nháº­t Cáº¥u trÃºc CÆ¡ sá»Ÿ Dá»¯ liá»‡u
```sql
-- Báº£ng lÆ°u cáº¥u hÃ¬nh Kanban columns
CREATE TABLE kanban_columns (
    id INT PRIMARY KEY AUTO_INCREMENT,
    status_code VARCHAR(50) NOT NULL UNIQUE,
    display_name VARCHAR(100) NOT NULL,
    color_code VARCHAR(7) DEFAULT '#3B82F6',
    sort_order INT NOT NULL DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Báº£ng lÆ°u user preferences cho view
CREATE TABLE user_view_preferences (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT NOT NULL,
    view_type ENUM('list', 'kanban') DEFAULT 'list',
    kanban_config JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id),
    UNIQUE KEY unique_user_preference (user_id)
);

-- Báº£ng lÆ°u drag & drop history
CREATE TABLE kanban_drag_history (
    id INT PRIMARY KEY AUTO_INCREMENT,
    project_id INT NOT NULL,
    user_id INT NOT NULL,
    from_status VARCHAR(50) NOT NULL,
    to_status VARCHAR(50) NOT NULL,
    drag_timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (project_id) REFERENCES projects(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- Insert default Kanban columns
INSERT INTO kanban_columns (status_code, display_name, color_code, sort_order) VALUES
('draft', 'Báº£n nhÃ¡p', '#6B7280', 1),
('pending_approval', 'Chá» phÃª duyá»‡t', '#F59E0B', 2),
('approved', 'ÄÃ£ phÃª duyá»‡t', '#10B981', 3),
('rejected', 'ÄÃ£ tá»« chá»‘i', '#EF4444', 4),
('in_progress', 'Äang thá»±c hiá»‡n', '#3B82F6', 5),
('completed', 'HoÃ n thÃ nh', '#8B5CF6', 6),
('suspended', 'Dá»«ng thá»±c hiá»‡n', '#F97316', 7);
```

#### API Endpoints
```
GET /api/projects/kanban
- Request: { 
    status_filter?: string[], 
    category_id?: number, 
    year?: number 
}
- Response: { 
    columns: KanbanColumn[], 
    projects: ProjectCard[] 
}

POST /api/projects/{id}/move-status
- Request: { 
    new_status: string, 
    reason?: string 
}
- Response: { 
    success: boolean, 
    message: string 
}

GET /api/kanban/columns
- Response: List of available Kanban columns

PUT /api/user/preferences/view
- Request: { 
    view_type: 'list' | 'kanban', 
    kanban_config?: object 
}
- Response: { success: boolean }
```

#### Data Models
```typescript
interface KanbanColumn {
    id: number;
    status_code: string;
    display_name: string;
    color_code: string;
    sort_order: number;
    is_active: boolean;
    project_count: number;
}

interface ProjectCard {
    id: number;
    project_code: string;
    name: string;
    status: string;
    category: ProjectCategory;
    budget: number;
    start_date: string;
    end_date?: string;
    created_by: User;
    priority: 'low' | 'medium' | 'high';
    is_official: boolean;
    can_drag: boolean;
    quick_actions: QuickAction[];
}

interface QuickAction {
    id: string;
    label: string;
    icon: string;
    action: string;
    disabled: boolean;
}

interface UserViewPreference {
    user_id: number;
    view_type: 'list' | 'kanban';
    kanban_config?: object;
}
```

---

### User Interface Requirements

#### Kanban Board View
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Danh má»¥c Dá»± Ã¡n                    [List View] [Kanban View] [Filter] [Search] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Báº£n nhÃ¡p    â”‚ â”‚ Chá» phÃª     â”‚ â”‚ ÄÃ£ phÃª      â”‚ â”‚ ÄÃ£ tá»« chá»‘i  â”‚ â”‚ HoÃ n    â”‚   â”‚
â”‚ â”‚ (3)         â”‚ â”‚ duyá»‡t       â”‚ â”‚ duyá»‡t       â”‚ â”‚ (1)         â”‚ â”‚ thÃ nh   â”‚   â”‚
â”‚ â”‚             â”‚ â”‚ (2)         â”‚ â”‚ (5)         â”‚ â”‚             â”‚ â”‚ (2)     â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ â”‚ INV-001 â”‚ â”‚ â”‚ â”‚ INV-004 â”‚ â”‚ â”‚ â”‚ INV-002 â”‚ â”‚ â”‚ â”‚ INV-005 â”‚ â”‚ â”‚ â”‚ INV-â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ Dá»± Ã¡n A â”‚ â”‚ â”‚ â”‚ Dá»± Ã¡n D â”‚ â”‚ â”‚ â”‚ Dá»± Ã¡n B â”‚ â”‚ â”‚ â”‚ Dá»± Ã¡n E â”‚ â”‚ â”‚ â”‚ 003 â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ 500M    â”‚ â”‚ â”‚ â”‚ 300M    â”‚ â”‚ â”‚ â”‚ 800M    â”‚ â”‚ â”‚ â”‚ 150M    â”‚ â”‚ â”‚ â”‚ Dá»±  â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ ğŸ›ï¸      â”‚ â”‚ â”‚ â”‚ â³      â”‚ â”‚ â”‚ â”‚ âœ…      â”‚ â”‚ â”‚ â”‚ âŒ      â”‚ â”‚ â”‚ â”‚ Ã¡n  â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ [Edit]   â”‚ â”‚ â”‚ â”‚ [View]  â”‚ â”‚ â”‚ â”‚ [View]  â”‚ â”‚ â”‚ â”‚ [View]  â”‚ â”‚ â”‚ â”‚ C   â”‚ â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ 400Mâ”‚ â”‚   â”‚
â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚ â”‚ âœ…  â”‚ â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚             â”‚ â”‚ â”‚ [V] â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ INV-006 â”‚ â”‚ â”‚ â”‚ INV-007 â”‚ â”‚ â”‚ â”‚ INV-008 â”‚ â”‚ â”‚             â”‚ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚ â”‚ Dá»± Ã¡n F â”‚ â”‚ â”‚ â”‚ Dá»± Ã¡n G â”‚ â”‚ â”‚ â”‚ Dá»± Ã¡n H â”‚ â”‚ â”‚             â”‚ â”‚         â”‚   â”‚
â”‚ â”‚ â”‚ 400M    â”‚ â”‚ â”‚ â”‚ 250M    â”‚ â”‚ â”‚ â”‚ 600M    â”‚ â”‚ â”‚             â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ â”‚ ğŸ“      â”‚ â”‚ â”‚ â”‚ â³      â”‚ â”‚ â”‚ â”‚ âœ…      â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ INV-â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ [Edit]  â”‚ â”‚ â”‚ â”‚ [View]  â”‚ â”‚ â”‚ â”‚ [View]  â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ 009 â”‚ â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚             â”‚ â”‚ â”‚ Dá»±  â”‚ â”‚   â”‚
â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚ â”‚ Ã¡n Iâ”‚ â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚             â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚             â”‚ â”‚ â”‚ 200Mâ”‚ â”‚   â”‚
â”‚ â”‚ â”‚ INV-010 â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ INV-011 â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ âœ…  â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ Dá»± Ã¡n J â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ Dá»± Ã¡n K â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ [V] â”‚ â”‚   â”‚
â”‚ â”‚ â”‚ 350M    â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ 450M    â”‚ â”‚ â”‚             â”‚ â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚ â”‚ ğŸ“      â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ âœ…      â”‚ â”‚ â”‚             â”‚ â”‚         â”‚   â”‚
â”‚ â”‚ â”‚ [Edit]  â”‚ â”‚ â”‚             â”‚ â”‚ â”‚ [View]  â”‚ â”‚ â”‚             â”‚ â”‚         â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚             â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚             â”‚ â”‚         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Project Card Detail
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PRJ-2024-001 - Dá»± Ã¡n A             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ›ï¸ Loáº¡i: Dá»± Ã¡n Äáº§u tÆ°               â”‚
â”‚ ğŸ“Š TMÄT dá»± kiáº¿n: 500,000,000 VND   â”‚
â”‚ ğŸ“Š TMÄT phÃª duyá»‡t: 450,000,000 VND â”‚
â”‚ ğŸ’° LÅ©y káº¿ vá»‘n Ä‘Ã£ á»©ng: 200,000,000  â”‚
â”‚ ğŸ’° Vá»‘n Ä‘Ã£ á»©ng nÄƒm nay: 150,000,000 â”‚
â”‚ ğŸ’° Dá»± kiáº¿n vá»‘n sáº½ á»©ng: 250,000,000 â”‚
â”‚ ğŸ’° Äá» xuáº¥t nÄƒm sau: 300,000,000    â”‚
â”‚ ğŸ‘¤ NgÆ°á»i táº¡o: Nguyá»…n VÄƒn A         â”‚
â”‚ â° Táº¡o: 15/02/2024                  â”‚
â”‚                                     â”‚
â”‚ [Xem chi tiáº¿t] [Chá»‰nh sá»­a] [PhÃª   â”‚
â”‚ duyá»‡t] [Tá»« chá»‘i]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### View Toggle Controls
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cháº¿ Ä‘á»™ xem:                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ï¸ [ğŸ“‹ List View]  â˜ [ğŸ“Š Kanban View]                â”‚
â”‚                                                         â”‚
â”‚ Bá»™ lá»c:                                                â”‚
â”‚ â˜‘ï¸ Táº¥t cáº£ dá»± Ã¡n                                        â”‚
â”‚ â˜ Chá»‰ dá»± Ã¡n chÃ­nh thá»©c                                 â”‚
â”‚ â˜ Dá»± Ã¡n cá»§a tÃ´i                                        â”‚
â”‚                                                         â”‚
â”‚ Loáº¡i dá»± Ã¡n: [Táº¥t cáº£ â–¼]                                â”‚
â”‚ Nguá»“n gá»‘c: [Táº¥t cáº£ â–¼]                                 â”‚
â”‚ NÄƒm: [2024 â–¼]                                          â”‚
â”‚                                                         â”‚
â”‚ TÃ¬m kiáº¿m: [Search box]                                 â”‚
â”‚                                                         â”‚
â”‚ [Ãp dá»¥ng] [LÃ m má»›i] [Export]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Drag & Drop Confirmation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ XÃ¡c nháº­n thay Ä‘á»•i tráº¡ng thÃ¡i        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Dá»± Ã¡n: PRJ-2024-001 - Dá»± Ã¡n A      â”‚
â”‚                                     â”‚
â”‚ Tá»«: Chá» phÃª duyá»‡t                   â”‚
â”‚ Äáº¿n: ÄÃ£ phÃª duyá»‡t                   â”‚
â”‚                                     â”‚
â”‚ LÃ½ do thay Ä‘á»•i (tÃ¹y chá»n):         â”‚
â”‚ [Textarea]                           â”‚
â”‚                                     â”‚
â”‚ âš ï¸ LÆ°u Ã½: Thay Ä‘á»•i nÃ y sáº½ Ä‘Æ°á»£c ghi  â”‚
â”‚    láº¡i trong lá»‹ch sá»­ dá»± Ã¡n          â”‚
â”‚                                     â”‚
â”‚ [Há»§y] [XÃ¡c nháº­n]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Integration Requirements

#### Bitrix24 Integration
- Sync status changes vá»›i Bitrix24
- Update deal status khi drag & drop
- Create tasks cho status transitions
- Log Kanban actions trong Bitrix24

#### Notification System
- Notification cho status changes
- Real-time updates cho team members
- Email alerts cho important transitions
- In-app notifications cho drag & drop

---

### Testing Requirements

#### Unit Tests
```typescript
describe('Kanban Board', () => {
    test('should load projects grouped by status', async () => {
        const projects = [
            { id: 1, status: 'draft', name: 'Project A' },
            { id: 2, status: 'pending_approval', name: 'Project B' },
            { id: 3, status: 'approved', name: 'Project C' }
        ];
        
        const kanbanData = await loadKanbanData(projects);
        expect(kanbanData.columns).toHaveLength(3);
        expect(kanbanData.columns[0].project_count).toBe(1);
    });

    test('should validate drag & drop permission', () => {
        const user = { id: 1, role: 'manager' };
        const project = { id: 1, status: 'pending_approval' };
        const newStatus = 'approved';
        
        const canDrag = validateDragPermission(user, project, newStatus);
        expect(canDrag).toBe(true);
    });

    test('should update project status on drag & drop', async () => {
        const projectId = 1;
        const newStatus = 'approved';
        const reason = 'Approved by manager';
        
        await updateProjectStatus(projectId, newStatus, reason);
        
        const project = await getProject(projectId);
        expect(project.status).toBe('approved');
    });
});
```

---

### Success Criteria
- [ ] Toggle giá»¯a List vÃ  Kanban view hoáº¡t Ä‘á»™ng
- [ ] Drag & drop project cards hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c
- [ ] Project cards hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin
- [ ] Filter vÃ  search trong Kanban hoáº¡t Ä‘á»™ng
- [ ] Real-time updates cho status changes
- [ ] Responsive design cho mobile/tablet
- [ ] Performance tá»‘t vá»›i large datasets
- [ ] TÃ­ch há»£p thÃ nh cÃ´ng vá»›i Bitrix24

---

### Kanban Configuration Rules

#### Default Kanban Columns
| Status Code | Display Name | Color | Sort Order | Description |
|-------------|--------------|-------|------------|-------------|
| draft | Báº£n nhÃ¡p | #6B7280 | 1 | Dá»± Ã¡n má»›i táº¡o |
| pending_approval | Chá» phÃª duyá»‡t | #F59E0B | 2 | ÄÃ£ gá»­i phÃª duyá»‡t |
| approved | ÄÃ£ phÃª duyá»‡t | #10B981 | 3 | ÄÃ£ Ä‘Æ°á»£c phÃª duyá»‡t |
| rejected | ÄÃ£ tá»« chá»‘i | #EF4444 | 4 | Bá»‹ tá»« chá»‘i |
| in_progress | Äang thá»±c hiá»‡n | #3B82F6 | 5 | Äang triá»ƒn khai |
| completed | HoÃ n thÃ nh | #8B5CF6 | 6 | ÄÃ£ hoÃ n thÃ nh |
| suspended | Dá»«ng thá»±c hiá»‡n | #F97316 | 7 | Táº¡m dá»«ng |

#### Drag & Drop Rules
| From Status | To Status | Allowed Roles | Validation Required |
|-------------|-----------|---------------|-------------------|
| initialized | pending_approval | creator, manager | Yes |
| pending_approval | approved | approver | Yes |
| pending_approval | rejected | approver | Yes |
| approved | in_progress | manager | No |
| in_progress | completed | manager | No |
| any | suspended | manager, admin | Yes |

---

**Document Version:** 1.0  
**Last Updated:** 08-2024  
**Next Review:** Sprint 4 